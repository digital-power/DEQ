!function(r){var a={};function n(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}n.m=r,n.c=a,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){function r(e,t){var s=this;s.version="1.4.0 core",s.name=e,s.listeners=[],s.events=[],s.history=[],s.global={},s.__private={},s.__private.lib={mergeObj:function(){for(var e,t,r={},a=[].splice.call(arguments,0);0<a.length;)if(e=a.splice(0,1)[0],"[object Object]"==Object.prototype.toString.call(e))for(t in e)e.hasOwnProperty(t)&&("[object Object]"==Object.prototype.toString.call(e[t])?r[t]=s.__private.lib.mergeObj(r[t]||{},e[t]):r[t]=s.__private.lib.deepCopy(e[t]));return r},deepCopy:function(e){switch(Object.prototype.toString.call(e)){case"[object Object]":return s.__private.lib.copyObj(e);case"[object Array]":for(var t=[],r=0,a=e.length;r<a;r++)t[r]=s.__private.lib.deepCopy(e[r]);return t;default:return e}},copyObj:function(e){return s.__private.lib.mergeObj({},e)},logError:function(e,t,r){var a={};a.deq_error_type=e,a.deq_error_message=t,"object"==typeof r&&(r.fileName&&r.lineNumber&&(a.deq_error_location=r.fileName+" ("+r.lineNumber+")"),r.name&&r.message&&(a.deq_error_details=r.name+": "+r.message),r.stack&&(a.deq_error_stack=r.stack.toString()),r.deq_listener&&(a.deq_error_listener=r.deq_listener),r.deq_event&&(a.deq_error_event=r.deq_event)),s.push({command:"ADD EVENT",name:"deq error",data:a})},callEventCallback:function(t,e,r,a){try{var n=s.__private.lib.copyObj(e);r.call(r,t,n,s)}catch(e){"deq error"!=t&&(e.deq_listener=a,e.deq_event=t,s.__private.lib.logError("listener","listener ("+a+") failed on '"+t,e))}},checkAndExecuteEventMatch:function(e,t){try{var r=s.listeners[t],a=s.events[e];if(!(Array.isArray(r)&&3<=r.length))throw new Error("Invalid reference to listeners["+t+"] in checkAndExecuteEventMatch");if(!(Array.isArray(a)&&2<=a.length))throw new Error("Invalid reference to events["+e+"] in checkAndExecuteEventMatch");var n={name:a[0],data:a[1]},o={name:r[0],matchEvent:r[1],handler:r[2]},i=new RegExp("^"+o.matchEvent+"$","i");!n.name.match(i)||n.name.match(/^deq error$/i)&&".*"==o.matchEvent||s.__private.lib.callEventCallback(n.name,n.data,o.handler,o.name)}catch(e){s.__private.lib.logError("checkAndExecuteEventMatch",e.message,e)}},addListener:function(e){if("object"==typeof e&&"function"==typeof e.handler&&"string"==typeof e.matchEvent){e.name=e.name||"unnamed listener";var t=s.listeners.push([e.name,e.matchEvent,e.handler]);if(t--,!e.skipHistory)for(var r=0,a=s.events.length;r<a;r++)s.__private.lib.checkAndExecuteEventMatch(r,t)}else s.__private.lib.logError("add listener","invalid input",{deq_listener:e.name})},addEvent:function(t){if("string"!=typeof t.name||void 0!==t.data&&"object"!=typeof t.data){var e={};"string"==typeof t.name&&(e.deq_event=t.name),s.__private.lib.logError("add event","invalid input",e)}else{var r;try{r=s.__private.lib.mergeObj(s.global,t.data)}catch(e){return e.deq_event=t.name,s.__private.lib.logError("add event","invalid event object",e),!1}r.deq_event=t.name,r.deq_event_ts=(new Date).getTime();var a=s.events.push([t.name,r]);a--;for(var n=0,o=s.listeners.length;n<o;n++)s.__private.lib.checkAndExecuteEventMatch(a,n)}},addGlobalData:function(e){"object"==typeof e.data&&(s.global=s.__private.lib.mergeObj(s.global,e.data))}},s.__private.commandMapping={"ADD EVENT":s.__private.lib.addEvent,"ADD LISTENER":s.__private.lib.addListener,"GLOBAL DATA":s.__private.lib.addGlobalData},s.push=function(e){var t,r;s.history.push(e),"object"==typeof e&&"string"==typeof e.command?(t=e.command.toUpperCase(),r=s.__private.lib.copyObj(e),s.__private.commandMapping.hasOwnProperty(t)?s.__private.commandMapping[t].call(this,r):s.__private.lib.logError("push","command '"+t+"' is unknown")):s.__private.lib.logError("push","invalid input: use .push({command:'#command#',#param1#:'param1_value',...})")},s.pushBulk=function(e){if(Array.isArray(e))for(;0<e.length;)s.push(e.shift())},Object.getPrototypeOf(s).constructor===r&&s.pushBulk(t)}(
/**
 @preserve Digital Event Queue.
 Copyright (c) 2016-2020: Digital Power B.V., All rights reserved.
 Licensed under the GNU Lesser General Public License v3.0:
 https://github.com/digital-power/DEQ/blob/master/LICENSE
 **/
r.prototype=[]).constructor=r,e.exports=r},function(e,t,r){e.exports=r(2)},function(e,t,r){window.DEQFactory=r(3)},function(e,t,r){try{var a=r(4)}catch(e){a=r(0)}var n,o,i="object"==typeof i?i:(o={},(n={}).get=function(e,t){return o.hasOwnProperty(e)?void 0!==t&&o[e].pushBulk(t):o[e]=new a(e,t),o[e]},n.getAll=function(){return o},n);e.exports=i},function(e,t,n){var o=n(0);function i(e,t){o.call(this,e,t);var r=this;r.version=r.version.split(" ")[0]+" Persist";var a=new(n(5))(this.name);r.__private.lib.persistData=function(e){try{a.addProperties(e)}catch(e){r.__private.lib.logError("persist data",e.message,e)}},r.__private.lib.deferData=function(e){try{e.duration="DEFER",a.addProperties(e)}catch(e){r.__private.lib.logError("defer data",e.message,e)}},r.__private.commandMapping["PERSIST DATA"]=r.__private.lib.persistData,r.__private.commandMapping["DEFER DATA"]=r.__private.lib.deferData,r.__private.lib.addEventOrigin=r.__private.lib.addEvent,r.__private.lib.addEvent=function(t){if(t&&"deq error"!=t.name){try{var e={};e.matchEvent=t.name,t.data=r.__private.lib.mergeObj(a.getProperties(e),t.data)}catch(e){return e.deq_event=t.name,r.__private.lib.logError("add event","invalid event object",e),!1}r.__private.lib.addEventOrigin(t)}else r.__private.lib.addEventOrigin(t)},r.__private.commandMapping["ADD EVENT"]=r.__private.lib.addEvent,Object.getPrototypeOf(r).constructor===i&&r.pushBulk(t)}(i.prototype=new o).constructor=i,e.exports=i},function(e,t){e.exports=function(e){function d(){for(var e,t,r={},a=[].splice.call(arguments,0);0<a.length;)if(e=a.splice(0,1)[0],"[object Object]"==Object.prototype.toString.call(e))for(t in e)e.hasOwnProperty(t)&&("[object Object]"==Object.prototype.toString.call(e[t])?r[t]=d(r[t]||{},e[t]):r[t]=e[t]);return r}function t(e){return d({},e)}function r(e,t,r,a,n,o,i){i="",r&&(r=Number(r),(o=new Date).setSeconds(o.getSeconds()+r),i=";expires="+o.toUTCString());var s="";0<(a=a||function(e){var t=(e=e||document.location.hostname).split("."),r=t[t.length-1];{var a;1<t.length&&(a=t[t.length-2],r=a+"."+r,"com"!==a&&"co"!==a||(r=t[t.length-3]+"."+r))}return r}()).indexOf(".")&&(s=";domain=."+a),n=n||"/",document.cookie=e+"="+encodeURIComponent(t)+i+";path="+n+s+";SameSite=Lax"}function a(e,t){this.storage={},this.COOKIE_NAME=e,this.COOKIE_LIFETIME=t}function n(){this.backendStorage={}}function o(e){this.STORAGE_NAME=e||"deq_defer",a.call(this,e)}this.LASTING_COOKIE_LIFETIME=63072e3,this.storePostFix="deq_pers_"+e,a.prototype={loadPropertiesFromBackend:function(){var e,t,r=(e=this.COOKIE_NAME,(t=document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)"))?decodeURIComponent(t.pop()):null);null!=r&&(this.storage=JSON.parse(r))},checkAndUpdateExpiryAttributes:function(){for(var e=Date.now(),t=Object.keys(this.storage),r=0,a=t.length;r<a;r++)for(var n=this.storage[t[r]],o=Object.keys(n.dataAttributes),i=0,s=o.length;i<s;i++){var c=n.dataAttributes[o[i]];!isNaN(c.expiry)&&parseInt(c.expiry)<e?this.remove(o[i],t[r]):c.renew&&!isNaN(c.renew)&&(c.expiry=this.determineExpiry({duration:c.renew}))}},loadProperties:function(){this.loadPropertiesFromBackend(),this.checkAndUpdateExpiryAttributes()},saveProperties:function(){r(this.COOKIE_NAME,JSON.stringify(this.storage),this.COOKIE_LIFETIME)},addProperties:function(e){for(var t=this.storage[e.matchEvent]||{data:{},dataAttributes:{}},r=Object.keys(e.data),a=0,n=r.length;a<n;a++){var o=r[a];t.data[o]=e.data[o],t.dataAttributes[o]={expiry:this.determineExpiry(e),renew:!(!e.renew||isNaN(e.duration))&&e.duration}}this.storage[e.matchEvent]=t},getProperties:function(e){if(!e.hasOwnProperty("matchEvent")||"string"!=typeof e.matchEvent)throw new Error("Invalid input for matchEvent property");for(var t={},r=Object.keys(this.storage),a=0,n=r.length;a<n;a++){var o=new RegExp("^"+r[a]+"$","i");e.matchEvent.match(o)&&(t=d(t,this.storage[r[a]].data))}return t},findEventMatchForKey:function(e){for(var t=Object.keys(this.storage),r=0,a=t.length;r<a;r++)if(this.storage[t[r]].data.hasOwnProperty(e))return t[r]},remove:function(e,t){for(var r=t||this.findEventMatchForKey(e);r;)delete this.storage[r].data[e],delete this.storage[r].dataAttributes[e],r=!t&&this.findEventMatchForKey(e)},determineExpiry:function(e){if(e.duration){var t=new Date;return isNaN(e.duration)?e.duration:t.setSeconds(t.getSeconds()+parseInt(e.duration))}return e.duration}},((n.prototype=new a).constructor=n).prototype.loadPropertiesFromBackend=function(){this.storage=t(this.backendStorage)},n.prototype.saveProperties=function(){this.backendStorage=t(this.storage)},((o.prototype=new a).constructor=o).prototype.getProperties=function(e){if(!e.hasOwnProperty("matchEvent")||"string"!=typeof e.matchEvent)throw new Error("Invalid input for matchEvent property");for(var t={},r=Object.keys(this.storage),a=0,n=r.length;a<n;a++){var o=new RegExp("^"+r[a]+"$","i");if(e.matchEvent.match(o))for(var i=this.storage[r[a]].data,t=d(t,i),s=Object.keys(i),c=0,p=s.length;c<p;c++)this.remove(s[c],r[a])}return t};var i=this;i.myPageloadStorage=new n,i.mySessionStorage=new a(this.storePostFix+"_s"),i.myLastingStorage=new a(this.storePostFix+"_l",this.LASTING_COOKIE_LIFETIME),i.myDeferStorage=new o(this.storePostFix+"_d"),i.loadStores=function(){i.myLastingStorage.loadProperties(),i.mySessionStorage.loadProperties(),i.myPageloadStorage.loadProperties(),i.myDeferStorage.loadProperties()},i.saveStores=function(){i.myLastingStorage.saveProperties(),i.mySessionStorage.saveProperties(),i.myPageloadStorage.saveProperties(),i.myDeferStorage.saveProperties()},i.getStorageForDuration=function(e){return"DEFER"===e?i.myDeferStorage:"PAGELOAD"===e?i.myPageloadStorage:"SESSION"===e?i.mySessionStorage:(e=parseInt(e),isNaN(e)?i.mySessionStorage:i.myLastingStorage)},i.deletePropertyWithKey=function(e){i.myPageloadStorage.remove(e),i.mySessionStorage.remove(e),i.myLastingStorage.remove(e),i.myDeferStorage.remove(e)},i.deleteProperties=function(e){for(var t=Object.keys(e),r=0,a=t.length;r<a;r++)i.deletePropertyWithKey(t[r])},i.addProperties=function(e){if(!e.hasOwnProperty("data")||"object"!=typeof e.data)throw new Error("Invalid input for data property");if(!e.hasOwnProperty("matchEvent")||"string"!=typeof e.matchEvent)throw new Error("Invalid input for matchEvent property");i.loadStores(),i.deleteProperties(e.data),i.getStorageForDuration(e.duration).addProperties(e),i.saveStores()},i.getProperties=function(e){if(!e.hasOwnProperty("matchEvent")||"string"!=typeof e.matchEvent)throw new Error("Invalid input for matchEvent property");i.loadStores();var t=i.myPageloadStorage.getProperties(e),r=i.mySessionStorage.getProperties(e),a=i.myLastingStorage.getProperties(e),n=i.myDeferStorage.getProperties(e);return i.saveStores(),d(a,r,t,n)}}}]);